# AT-002: CI-Smoketest für helloWorld

## Ziel
GitHub Actions führt bei jedem PR einen Smoketest aus, der den Functions+Firestore Emulator startet und `helloWorld` prüft. PR ist **rot**, wenn Response nicht `{ message, ts }` enthält.

## Scope
- In-Scope: `.github/workflows/ci.yaml`, `functions/scripts/emu-smoke.js`, ggf. `functions/package.json` (Script)
- Out-of-Scope: Deploy auf GCP, weitere Endpunkte

## Inputs
- Project ID: `recovery-engine`
- Endpoint: `/recovery-engine/europe-west1/helloWorld`

## Output
- CI-Job „smoke“ läuft auf `ubuntu-latest`
- Startet Emulator (functions+firestore)
- Ruft Endpoint lokal auf
- Prüft JSON enthält `message` und `ts` (ISO-8601)

## Tests
- PR öffnen → Action „smoke“ startet automatisch
- Erwartet: Job **grün** bei gültiger Antwort
- Negativtest: Funktion temporär brechen → Job **rot**

## Definition of Done
- `.github/workflows/ci.yaml` enthält Job „smoke“
- `functions/scripts/emu-smoke.js` vorhanden
- CI rot bei Fail, grün bei Pass
