# AT-009 (MVP): Shopify OAuth Mock

## Ziel
Mock-Endpoint `shopifyAuthMock`, der einen vereinfachten Shopify OAuth-Handshake simuliert.  
Ergebnis: Ein Dokument in der Collection `shops` mit `shopDomain`, `tenantId`, `createdAt`.

## Scope
- In-Scope: `functions/index.js` (neue Function)
- Out-of-Scope: echte Shopify API Calls, Auth, Security, Webhooks

## Inputs
- GET-Request mit Query-Param:  
  - `shop` (string, required; z. B. `test.myshopify.com`)  
  - `tenantId` (string, required)

## Output
- HTTP 200 JSON:  
```json
{
  "ok": true,
  "shopDomain": "test.myshopify.com",
  "tenantId": "t1",
  "createdAt": "<ISO-8601>"
}
Firestore: Dokument in Collection shops, Doc-ID = Auto-ID, Felder wie oben.

HTTP 400 bei fehlenden Parametern: { "error": "bad_request" }.

Tests
Emulator starten:

powershell
Code kopieren
npm run emu --prefix functions
Happy Path:

powershell
Code kopieren
curl "http://127.0.0.1:5001/recovery-engine/europe-west1/shopifyAuthMock?shop=test.myshopify.com&tenantId=t1"
Erwartet: JSON { ok:true, shopDomain:"test.myshopify.com", tenantId:"t1", createdAt:"..." }.
Firestore-UI zeigt neues Dokument in shops.

Bad Request:

powershell
Code kopieren
curl "http://127.0.0.1:5001/recovery-engine/europe-west1/shopifyAuthMock"
Erwartet: HTTP 400 + { "error": "bad_request" }.

Definition of Done
Bestehende Endpoints unverändert funktionsfähig.

Nur functions/index.js geändert.

Node 22, Region europe-west1.

Lokale Tests grün. CI bleibt grün.

Ticket als MVP Track gekennzeichnet.
